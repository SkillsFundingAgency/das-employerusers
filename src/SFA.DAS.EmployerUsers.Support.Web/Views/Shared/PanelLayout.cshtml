@using System.Web.Mvc.Html
@using SFA.DAS.Support.Shared.Navigation
@using SFA.DAS.Support.Shared.ViewModels
@{
    MenuViewModel menu = (ViewBag ?? new { }).Menu ?? new MenuViewModel { MenuItems = new List<MenuItem>() };
    var menuItems = menu.MenuItems;

    var header = ViewBag.Header as HeaderViewModel ?? new HeaderViewModel();
    if (header != null)
    {
        Html.RenderPartial("_header", header);
    }
}
<div class="grid-row">
    @if (menuItems.Count > 0)
    {
        var activeMenuItem = menu.SelectedMenuItemKeys.LastOrDefault() ?? string.Empty;
        var orientation = "flex-column";
        <div class="column-one-quarter column__no-padding-right" id="panelNavigation">
            <nav class="sub-nav">
                <ul role="menu @orientation">
                    @foreach (var menuItem in menuItems)
                    {
                        var isActive = menu.SelectedMenuItemKeys.Contains(menuItem.Key) ? "selected" : "";
                        <li>
                            <a class="nav-link @isActive"
                               id="menu@menuItem.Key"
                               href="@menuItem.NavigateUrl">
                                @menuItem.Text
                            </a>
                        </li>
                    }
                </ul>
            </nav>
        </div>
        <div class="column-three-quarters column__double-padding-left column__border-left" id="panelContent">
            @RenderBody()
        </div>
    }
    else
    {
        <div class="column-full" id="panelContent">
            @RenderBody()
        </div>
    }
</div>