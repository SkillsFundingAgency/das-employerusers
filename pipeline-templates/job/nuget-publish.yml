jobs:
- job: CleanArtifacts
  displayName: Clean artifacts directory
  workspace:
    clean: all
- deployment: NuGetPush
  dependsOn: CleanArtifacts
  environment: Nuget
  strategy:
    runOnce:
      deploy:
        steps:
        - download: current
          artifact: NuGetPackages
        - task: NuGetCommand@2
          displayName: NuGet push
          inputs:
            command: push
            packagesToPush: '$(Pipeline.Workspace)/NuGetPackages/*.nupkg;!$(Pipeline.Workspace)/NuGetPackages/*.symbols.nupkg'
            nuGetFeedType: external
            publishFeedCredentials: 'SFA NuGet'